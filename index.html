<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sunil Balendran - Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
<!-- New single Google‑Font -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Outfit', sans-serif;
    background-color: #0f172a;    /* deep slate */
    color: #e2e8f0;               /* light gray */
  }
  canvas { background: transparent; }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0);    }
  }
</style>

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1a202c; }
        ::-webkit-scrollbar-thumb { background: #0044b3; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #00338a; }
        html, body { height: 100%; font-family: 'Inter', sans-serif; background-color: #f8f9fa; color: #1a202c; }
        body { display: flex; flex-direction: column; }
        main { flex-grow: 1; }
        .ai-content-area { margin-top: 1rem; padding: 0.75rem; background-color: #f0e6ff; border-left: 4px solid #6d28d9; border-radius: 4px; font-size: 0.875rem; color: #3730a3; }
        .ai-content-area p { margin-bottom: 0.5rem; }
    </style>
</head>

<body class="bg-light-bg text-dark-text">

    <!-- =================  NEW LANDING OVERLAY  ================ -->
<div id="landing" class="fixed inset-0 bg-[#0f172a] z-[5000] transition-opacity duration-700 ease-in-out">
    <canvas id="landingCanvas" class="absolute top-0 left-0 w-full h-full"></canvas>
    <div class="relative z-10 flex flex-col items-center justify-center h-full text-center text-white p-4">
        <div class="landing-content opacity-0" style="animation: fadeInUp 1s ease-out 0.5s forwards;">
            <h1 class="text-5xl md:text-7xl font-bold tracking-tight text-cyan-400">Sunil Balendran</h1>
            <p class="mt-4 text-lg md:text-xl text-slate-300">Engineering Physics &amp; Management (B.Eng.Mgt)</p>
            <button id="enterBtn" class="mt-8 inline-flex items-center gap-2 bg-purple-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                View Portfolio
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                </svg>
            </button>
        </div>
    </div>
</div>

    <!-- =================  MAIN NAVBAR  ================ -->
    <header class="sticky top-0 z-[1000] bg-white/90 backdrop-blur-md shadow-md transition-all duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-3">
            <a href="#homeSection" class="text-lg sm:text-xl font-press-start text-custom-blue hover:text-blue-700 transition-colors">Muqtadir Hussain</a>
            <nav id="mainNav" class="flex gap-2 sm:gap-3">
                <button data-page="homeSection" class="nav-btn active px-3 py-2 sm:px-4 font-press-start text-xs sm:text-sm rounded-md">Home</button>
                <button data-page="skillsSection" class="nav-btn px-3 py-2 sm:px-4 font-press-start text-xs sm:text-sm rounded-md">Skills</button>
                <button data-page="portfolioSection" class="nav-btn px-3 py-2 sm:px-4 font-press-start text-xs sm:text-sm rounded-md">Portfolio</button>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <!-- =================  HOME SECTION  ================ -->
        <section id="homeSection" class="page active animate-fade-in-up">
            <div class="bg-white shadow-xl rounded-xl p-6 sm:p-8 md:p-10">
                <h2 class="font-press-start text-2xl sm:text-3xl text-custom-blue mb-6">About Me</h2>
                <!-- Main grid for layout -->
                <div class="grid md:grid-cols-5 gap-8 md:gap-12 items-start">
                    
                    <!-- Left Column: Text Content -->
                    <div class="md:col-span-3 space-y-4 text-medium-text text-sm sm:text-base leading-relaxed">
                        <p>Hello! I’m <strong class="text-custom-blue">Muqtadir Hussain</strong>.</p>
                        <p>I recently graduated with a degree in <strong class="text-custom-blue">Engineering Physics & Management</strong> from McMaster University, where I developed a broad, multidisciplinary engineering skillset alongside a strategic business perspective. My passion lies in tackling complex technical challenges across diverse, high-impact fields including <strong>nuclear engineering, semiconductor technology, autonomous systems, and photonics</strong>.</p>
                        <p>Throughout my projects, I've embraced this versatility by applying fundamental physics and systems-level thinking to varied problems. I have simulated CANDU reactor behavior using MCNP, designed and fabricated silicon solar cells in a cleanroom, engineered an AI-powered mechatronic system using computer vision, and modeled optical communication links for satellites. </p>
                        <p>This experience has honed my ability to integrate hardware, software, and advanced modeling to develop robust and innovative solutions. I am eager to apply this unique blend of analytical and hands-on skills to help build the next generation of technology.</p>
                        <p>This portfolio showcases my journey, skills, and projects. Feel free to explore and reach out if you'd like to connect!</p>
                    </div>

                    <!-- Right Column: Photo and Connect Info -->
                    <div class="md:col-span-2 flex flex-col items-center text-center">
                        <div class="flex justify-center mb-8">
                            <img src="media/muq.jfif" alt="Muqtadir Hussain" class="rounded-full shadow-lg w-48 h-48 sm:w-56 sm:h-56 object-cover border-4 border-custom-blue">
                        </div>
                        <div class="space-y-3 mb-8">
                            <h3 class="font-press-start text-xl text-custom-blue">Connect</h3>
                            <p class="text-medium-text"><strong>Email:</strong> <a href="mailto:muqti123@gmail.com" class="text-custom-blue hover:underline">muqti123@gmail.com</a></p>
                            <p class="text-medium-text"><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/muqtadir66" target="_blank" rel="noopener noreferrer" class="text-custom-blue hover:underline">linkedin.com/in/muqtadir66</a></p>
                            <p class="text-medium-text"><strong>GitHub:</strong> <a href="https://github.com/muqtadir66" target="_blank" rel="noopener noreferrer" class="text-custom-blue hover:underline">github.com/muqtadir66</a></p>
                        </div>
                         <button id="resumeBtn" class="inline-flex items-center gap-2 bg-terminal-green text-terminal-bg font-press-start text-sm py-3 px-6 rounded-lg hover:bg-green-400 transition-all duration-200 transform hover:scale-105 shadow-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-file-earmark-text" viewBox="0 0 16 16">
                                <path d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5.5 11a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/>
                                <path d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2.5h2.5L9.5 1zM3 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm7 11.5a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V2a.5.5 0 0 1 .5-.5h4.5v3H12v9.5z"/>
                            </svg>
                            View Résumé
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- =================  SKILLS SECTION  ================ -->
        <section id="skillsSection" class="page hidden animate-fade-in-up">
            <div class="bg-white shadow-xl rounded-xl p-6 sm:p-8 md:p-10">
                <h2 class="font-press-start text-2xl sm:text-3xl text-custom-blue mb-8">Skills</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-slate-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow">
                        <h3 class="font-press-start text-lg text-custom-blue mb-3">Software & Programming</h3>
                        <ul class="list-disc list-inside space-y-1 text-medium-text">
                            <li>C, Python, MATLAB</li>
                            <li>JavaScript, HTML, CSS</li>
                            <li>MSP430 Assembly</li>
                            <li>SQL, MongoDB</li>
                            <li>LabVIEW, Multisim (SPICE)</li>
                            <li>Version Control (Git, GitHub)</li>
                        </ul>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow">
                        <h3 class="font-press-start text-lg text-custom-blue mb-3">Engineering & Design</h3>
                        <ul class="list-disc list-inside space-y-1 text-medium-text">
                            <li>Embedded Systems (MSP430, Arduino, Raspberry Pi)</li>
                            <li>PID Control Systems</li>
                            <li>Semiconductor Device Fabrication & TCAD (Sentaurus)</li>
                            <li>Optical Systems Design (Zemax, RSoft)</li>
                            <li>Nuclear Systems (MCNP, CANDU Simulators)</li>
                            <li>CAD (Autodesk Inventor), 3D Printing</li>
                            <li>IoT Systems & Cloud Platforms (Adafruit IO)</li>
                        </ul>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow">
                        <h3 class="font-press-start text-lg text-custom-blue mb-3">Analytical & Other</h3>
                        <ul class="list-disc list-inside space-y-1 text-medium-text">
                            <li>Data Analysis & Visualization</li>
                            <li>Signal Processing</li>
                            <li>Fluid & Thermal Analysis (ANSYS Fluent)</li>
                            <li>Technical Writing & Reporting</li>
                            <li>Project Management & Consulting</li>
                            <li>Problem Solving & Critical Thinking</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- =================  PORTFOLIO SECTION  ================ -->
        <section id="portfolioSection" class="page hidden animate-fade-in-up">
            <div class="bg-white shadow-xl rounded-xl p-6 sm:p-8 md:p-10">
                <h2 class="font-press-start text-2xl sm:text-3xl text-custom-blue mb-8">Portfolio</h2>
                <nav id="categoryFilter" class="mb-8 flex flex-wrap gap-2 sm:gap-3"></nav>
                <section class="projects grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8" id="projectsGrid"></section>
            </div>
        </section>
    </main>

    <!-- =================  FOOTER  ================ -->
    <footer class="bg-dark-text text-light-bg py-8 text-center mt-auto">
        <div class="container mx-auto px-4">
            <p class="font-press-start text-sm mb-2">&copy; <span id="currentYear"></span> Muqtadir Hussain. All Rights Reserved.</p>
            <p class="text-xs">Designed with <span class="text-red-500">❤</span> and a touch of retro.</p>
             <div class="mt-4 flex justify-center space-x-4">
                <a href="https://www.linkedin.com/in/muqtadir66" target="_blank" rel="noopener noreferrer" class="text-light-bg hover:text-custom-blue transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg>
                </a>
                <a href="https://github.com/muqtadir66" target="_blank" rel="noopener noreferrer" class="text-light-bg hover:text-custom-blue transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
                </a>
            </div>
        </div>
    </footer>

    <button id="backToTopBtn" class="fixed bottom-5 right-5 bg-custom-blue text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 opacity-0 translate-y-10">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-up-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"/></svg>
    </button>
    
    <!-- =================  DYNAMIC MEDIA MODAL (REBUILT)  ================ -->
    <div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[2000] p-4 hidden" id="mediaModal" onclick="closeMediaModal(event)">
        <!-- Modal container. JS will add specific layout classes here. -->
        <div id="modalContainer" class="relative">
             <!-- Content will be injected by JS -->
        </div>

        <!-- Static controls, positioned relative to the viewport -->
        <button class="absolute top-3 right-3 text-gray-300 bg-black/50 hover:bg-black/75 p-2 rounded-full z-10 transition-colors" onclick="closeMediaModal(null, true)">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/></svg>
        </button>
        <button class="modal-nav absolute top-1/2 left-2 -translate-y-1/2 text-white bg-black/40 hover:bg-black/60 p-2 rounded-full cursor-pointer transition-colors" onclick="prevMedia()">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/></svg>
        </button>
        <button class="modal-nav absolute top-1/2 right-2 -translate-y-1/2 text-white bg-black/40 hover:bg-black/60 p-2 rounded-full cursor-pointer transition-colors" onclick="nextMedia()">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>
        </button>
    </div>

    <div class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[2000] p-4 hidden" id="resumeModal">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col relative overflow-hidden">
            <div class="p-2 border-b bg-gray-50 flex justify-end items-center">
                <a href="media/Muqtadir's Resume.pdf" download="Muqtadir_Hussain_Resume.pdf" class="inline-flex items-center gap-2 bg-custom-blue text-white font-sans text-xs font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                      <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                      <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                    Download
                </a>
                <button class="text-gray-500 hover:text-black p-2 rounded-full ml-2" onclick="closeResumeModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/></svg>
                </button>
            </div>
            <div class="flex-grow overflow-auto" id="resumeContent"><embed src="media/Muqtadir's Resume.pdf" type="application/pdf" class="w-full h-full" /></div>
        </div>
    </div>

    <script>
        // --- UTILITY FUNCTIONS ---
        const qs = (sel) => document.querySelector(sel);
        const qsa = (sel) => document.querySelectorAll(sel);
        
        // --- DOM ELEMENT DECLARATIONS ---
        const landing = qs("#landing");
        const enterBtn = qs("#enterBtn");
        const mainNavButtons = qsa("#mainNav button");
        const pages = qsa(".page");
        const resumeBtn = qs("#resumeBtn");
        const resumeModal = qs("#resumeModal");
        const categoryFilterContainer = qs("#categoryFilter");
        const projectsGrid = qs("#projectsGrid");
        const backToTopBtn = qs("#backToTopBtn");
        const canvas = qs('#landingCanvas');
        const mediaModal = qs("#mediaModal");
        const modalContainer = qs("#modalContainer");
        const ctx = canvas.getContext('2d');

        // --- STATE VARIABLES ---
        let particlesArray;
        let currentMediaIndex = 0;
        let currentMediaArray = [];
        const projects = [
            {
                title: "Autonomous Blackjack-Dealing System – Engineering Physics Capstone Project",
                category: "Capstone Projects",
                tags: ["Raspberry Pi", "OpenCV", "Python", "Mechatronics", "AI Dealer"],
                bullets: ["Engineered a fully autonomous Blackjack dealer integrating mechanical actuation, computer vision, and game logic control to simulate human-like card dealing and gameplay interaction.","Designed and built a mechanical card dispensing system using precision-aligned roller pairs driven by DC motors, achieving reliable single-card separation and directional ejection with feedback tuning to minimize jamming and misfeeds.","Developed a Python-based computer vision module using OpenCV to recognize user hand gestures (e.g., “Hit”, “Stand”) with real-time video input, achieving robust classification under varied lighting and background conditions.","Programmed an AI dealer algorithm in Python to handle dynamic deck reshuffling, betting logic, and real-time decision-making, interfaced with gesture recognition and mechanical dispensing systems.","Integrated all subsystems on a Raspberry Pi microcontroller platform, establishing synchronized control across hardware (motors, camera), software (game state logic), and user interface layers.","Conducted performance testing and system tuning to ensure reliable game flow and human interaction, refining grip materials and motor control parameters to prevent stalling and double feeding.","Delivered full technical documentation and demonstration; showcased the system at the final project expo, highlighting cross-disciplinary integration of mechatronics, embedded systems, and AI-driven interaction.",],
                media: [{ type: "pdf", src: "media/BlackJack Orama - Autonomous BlackJack Dealer.pdf", name: "BlackJack Orama - Autonomous BlackJack Dealer" },{ type: "image", src: "media/BlackJack Orama.jpg", name: "BlackJack Orama" },],
                aiExplanation: "This capstone project is the ultimate fusion of my skills: mechanical design for the card dealer, computer vision (OpenCV) to see player gestures, and embedded programming (Python on a Raspberry Pi) to act as the brain. I built a physical robot that could act as a Blackjack dealer, showcasing a complete mechatronic system from concept to a functional, interactive prototype."
            }];

        // --- PARTICLE ANIMATION ---
        function setupCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; this.color = color;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = 'rgba(0, 68, 179, 0.4)';
                ctx.fill();
            }
            update() {
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                this.x += this.directionX;
                this.y += this.directionY;
                this.draw();
            }
        }
        function initParticles() {
            particlesArray = [];
            let numberOfParticles = (canvas.height * canvas.width) / 12000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2.5) + 1;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * 0.4) - 0.2;
                let directionY = (Math.random() * 0.4) - 0.2;
                particlesArray.push(new Particle(x, y, directionX, directionY, size));
            }
        }
        function connectParticles() {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) +
                        ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    if (distance < (canvas.width / 8) * (canvas.height / 8)) {
                        opacityValue = 1 - (distance / 25000);
                        ctx.strokeStyle = `rgba(0, 100, 255, ${opacityValue})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }
        function animateParticles() {
            requestAnimationFrame(animateParticles);
            ctx.clearRect(0, 0, innerWidth, innerHeight);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
            connectParticles();
        }

        // --- PAGE & PROJECT RENDERING ---
        function renderFilterButtons() {
            const categories = ["All", ...new Set(projects.map((p) => p.category))];
            categoryFilterContainer.innerHTML = '';
            categories.forEach((cat, idx) => {
                const btn = document.createElement("button");
                btn.textContent = cat || "Uncategorized";
                btn.className = "px-4 py-2 rounded-md font-press-start text-xs border-2 border-custom-blue transition-all duration-200";
                if (idx === 0) {
                    btn.classList.add("bg-custom-blue", "text-white");
                } else {
                    btn.classList.add("text-custom-blue", "hover:bg-blue-100");
                }
                btn.addEventListener("click", (e) => {
                    qsa("#categoryFilter button").forEach((b) => {
                        b.classList.remove("bg-custom-blue", "text-white");
                        b.classList.add("text-custom-blue", "hover:bg-blue-100");
                    });
                    e.currentTarget.classList.add("bg-custom-blue", "text-white");
                    e.currentTarget.classList.remove("text-custom-blue", "hover:bg-blue-100");
                    renderProjects(cat);
                });
                categoryFilterContainer.appendChild(btn);
            });
        }
        function renderProjects(filter = "All") {
            projectsGrid.innerHTML = "";
            const filteredProjects = filter === "All" ? projects : projects.filter((p) => p.category === filter);
            filteredProjects.forEach((proj) => {
                const originalIndex = projects.findIndex(p => p.title === proj.title);
                const card = document.createElement("div");
                card.className = "bg-slate-50 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col overflow-hidden";
                card.style.animation = `fadeInUp 0.5s ease-out ${originalIndex * 50}ms forwards`;
                card.classList.add('opacity-0');
                const aiContentId = `ai-content-${originalIndex}`;
                const explainBtnId = `explain-btn-${originalIndex}`;
                const tagsHTML = proj.tags?.map(t => `<span class="inline-block bg-custom-blue/10 text-custom-blue text-xs font-press-start px-2 py-1 rounded-full">${t}</span>`).join(" ") || "";
                const bulletsHTML = proj.bullets?.map(b => `<li class="text-sm text-medium-text">${b}</li>`).join("") || "";
                const attachmentsHTML = proj.media?.map((m, i) => {
                    let iconSVG = '';
                    if (m.type === "pdf") iconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-file-earmark-pdf-fill shrink-0" viewBox="0 0 16 16"><path d="M5.523 12.424c.14-.082.293-.162.459-.238a7.878 7.878 0 0 1-.45.606c-.28.337-.498.516-.635.572a.266.266 0 0 1-.035.012.282.282 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.417-.514.876-.964zm4.177-2.456c-.27-.24-.272-.561-.052-.774.19-.193.44-.334.702-.334.398 0 .69.266.69.662 0 .326-.234.576-.727.576-.223 0-.396-.087-.515-.179zm.483-1.143c.126.11.25.213.374.317a.742.742 0 0 1 .166.323.75.75 0 0 1-.166.615c-.138.145-.39.283-.687.283a1.12 1.12 0 0 1-.189-.02c-.19-.042-.35-.12-.458-.222a1.186 1.186 0 0 1-.166-.248.91.91 0 0 1-.029-.111c-.052-.13-.048-.252.038-.377.175-.266.62-.552 1.19-.804zm.409 3.612a.99.99 0 0 1-.399.243.71.71 0 0 1-.401.025c-.387-.052-.597-.203-.756-.365a.867.867 0 0 1-.157-.299c-.042-.105-.036-.213.013-.314.058-.124.13-.25.254-.384.27-.286.666-.498 1.152-.667.073-.025.15-.05.223-.075a.307.307 0 0 1 .091-.01.32.32 0 0 1 .11.024c.07.025.12.064.153.118.073.12.058.248-.004.364a.957.957 0 0 1-.213.318.87.87 0 0 1-.262.224.853.853 0 0 1-.286.134.84.84 0 0 1-.183.03zm6.832-7.399H5.525V4H5.024a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V4.975a.5.5 0 0 0-.5-.5H12.48V1.5H9.51v1.55H5.525a.5.5 0 0 0-.5.5v.5h11.95a.5.5 0 0 0 .5-.5V4.975a.5.5 0 0 0-.5-.5Z"/><path fill-rule="evenodd" d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z"/></svg>`;
                    else if (m.type === "image" || m.type === "img") iconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-image-fill shrink-0" viewBox="0 0 16 16"><path d="M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5A1.5 1.5 0 1 0 4.5 7 1.5 1.5 0 0 0 6 5.5z"/></svg>`;
                    else if (m.type === "video") iconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-play-btn-fill shrink-0" viewBox="0 0 16 16"><path d="M0 12V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm6.79-6.907A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"/></svg>`;
                    else iconSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-file-earmark-fill shrink-0" viewBox="0 0 16 16"><path d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2.5a1 1 0 0 0 1 1h2.5L9.5 1.5z"/></svg>`;
                    
                    const displayName = m.name || m.src.split("/").pop().substring(0, 20) + (m.src.split("/").pop().length > 20 ? '...' : '');

                    if (m.type === 'pdf') {
                        return `<a href="${m.src}" target="_blank" rel="noopener noreferrer" class="attachment-btn flex items-center gap-2 text-sm text-custom-blue bg-custom-blue/10 hover:bg-custom-blue/20 p-2 rounded-md transition-colors duration-200"> ${iconSVG} <span class="truncate" title="${m.src.split("/").pop()}">${displayName}</span></a>`;
                    } else {
                        return `<button class="attachment-btn flex items-center gap-2 text-sm text-custom-blue bg-custom-blue/10 hover:bg-custom-blue/20 p-2 rounded-md transition-colors duration-200" onclick="openMediaModal(${originalIndex}, ${i})"> ${iconSVG} <span class="truncate" title="${m.src.split("/").pop()}">${displayName}</span></button>`;
                    }
                }).join(" ") || "";
                card.innerHTML = `
                    <div class="p-5 flex-grow">
                        <h3 class="text-xl font-press-start text-custom-blue mb-3">${proj.title}</h3>
                        <div class="flex flex-wrap gap-2 mb-4">${tagsHTML}</div>
                        <ul class="list-disc list-inside space-y-1.5 mb-4 pl-1">${bulletsHTML}</ul>
                    </div>
                    <div class="px-5 pb-5 border-t border-gray-200 pt-4">
                        <p class="text-sm font-semibold text-dark-text mb-2">Attachments:</p>
                        <div class="flex flex-wrap gap-2 mb-4">${attachmentsHTML.length > 0 ? attachmentsHTML : '<p class="text-xs text-light-text">No attachments.</p>'}</div>
                        <div class="mt-4 pt-4 border-t border-gray-200 space-y-2">
                             <button id="${explainBtnId}" data-project-index="${originalIndex}" class="w-full gemini-btn inline-flex items-center justify-center gap-2 bg-ai-purple text-white font-press-start text-xs py-2 px-3 rounded-md hover:bg-purple-700 transition-colors">
                                ✨ Explain Project
                            </button>
                            <div id="${aiContentId}" class="ai-content-area hidden"></div>
                        </div>
                    </div>`;
                projectsGrid.appendChild(card);
                qs(`#${explainBtnId}`).addEventListener('click', (e) => toggleProjectExplanation(e.currentTarget));
            });
        }
        function toggleProjectExplanation(buttonElement) {
            const projectIndex = parseInt(buttonElement.dataset.projectIndex);
            const project = projects[projectIndex];
            const aiContentArea = qs(`#ai-content-${projectIndex}`);
            if (!project || !aiContentArea) return;

            if (aiContentArea.classList.contains('hidden')) {
                aiContentArea.innerHTML = `<p>${project.aiExplanation}</p>`;
                aiContentArea.classList.remove('hidden');
                 buttonElement.textContent = 'Hide Explanation';
            } else {
                aiContentArea.innerHTML = '';
                aiContentArea.classList.add('hidden');
                 buttonElement.innerHTML = '✨ Explain Project';
            }
        }
        
        // --- MODAL LOGIC ---
        window.openMediaModal = (projectIndex, mediaIndex) => {
            currentMediaArray = projects[projectIndex].media;
            currentMediaIndex = mediaIndex;
            renderMediaItem();
        };
        window.closeMediaModal = (event, forceClose = false) => {
            if (forceClose || (event && event.target === mediaModal)) {
                mediaModal.classList.add("hidden");
                document.body.style.overflow = 'auto';
            }
        };
        window.prevMedia = () => {
            currentMediaIndex = (currentMediaIndex - 1 + currentMediaArray.length) % currentMediaArray.length;
            renderMediaItem();
        };
        window.nextMedia = () => {
            currentMediaIndex = (currentMediaIndex + 1) % currentMediaArray.length;
            renderMediaItem();
        };
        function renderMediaItem() {
            const item = currentMediaArray[currentMediaIndex];
            if (!item) return;

            modalContainer.innerHTML = '';
            let element;

            if (item.type === "pdf") {
                 // This case should not be reached for portfolio PDFs anymore, but kept for robustness
                mediaModal.className = "fixed inset-0 bg-black/80 backdrop-blur-sm z-[2000] p-4 flex items-center justify-center";
                modalContainer.className = "relative bg-white rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col";
                element = document.createElement("iframe");
                element.src = item.src;
                element.className = "w-full h-full flex-grow border-none";
                element.title = item.name || "PDF Viewer";
                modalContainer.appendChild(element);
            } else {
                mediaModal.className = "fixed inset-0 bg-black/80 backdrop-blur-sm z-[2000] p-4 flex items-center justify-center";
                modalContainer.className = "relative w-auto h-auto";
                if (item.type === "image" || item.type === "img") {
                    element = document.createElement("img");
                    element.src = item.src;
                    element.alt = item.name || "Project image";
                    element.className = "block max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-xl";
                    element.onerror = () => { modalContainer.innerHTML = `<p class="p-4 text-center text-red-500 bg-white rounded">Could not load image: ${item.src}</p>`; };
                } else if (item.type === "video") {
                    element = document.createElement("video");
                    element.src = item.src;
                    element.controls = true;
                    element.autoplay = true;
                    element.className = "block max-w-[90vw] max-h-[90vh] object-contain rounded-lg shadow-xl";
                    element.onerror = () => { modalContainer.innerHTML = `<p class="p-4 text-center text-red-500 bg-white rounded">Could not load video: ${item.src}</p>`;};
                } else {
                    element = document.createElement("div");
                    element.className = "p-8 bg-white rounded-lg";
                    element.innerHTML = `<p class="text-center">Cannot preview this file type.</p><a href="${item.src}" target="_blank" class="block text-center text-custom-blue hover:underline mt-2">Download File</a>`;
                }
                if (element) {
                    modalContainer.appendChild(element);
                }
            }
            mediaModal.classList.remove("hidden");
            document.body.style.overflow = 'hidden';
        }

        // --- GENERAL EVENT LISTENERS & INITIALIZATION ---
        const hideLanding = () => {
            landing.classList.add("opacity-0", "pointer-events-none");
            setTimeout(() => landing.classList.add("hidden"), 700);
            document.body.style.overflow = 'auto';
        };

        enterBtn.addEventListener("click", hideLanding);
        document.addEventListener("keydown", (e) => {
            if (e.key === "Enter" && !landing.classList.contains("hidden") && !landing.classList.contains("opacity-0")) hideLanding();
            if (e.key === "Escape") {
                if (!resumeModal.classList.contains("hidden")) closeResumeModal();
                if (!mediaModal.classList.contains("hidden")) closeMediaModal(null, true);
            }
            if (!mediaModal.classList.contains("hidden")) {
                if (e.key === "ArrowLeft") prevMedia();
                if (e.key === "ArrowRight") nextMedia();
            }
        });
        mainNavButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
                const targetPageId = btn.getAttribute("data-page");
                mainNavButtons.forEach((b) => {
                    b.classList.remove("active", "bg-custom-blue", "text-white");
                    b.classList.add("text-custom-blue", "hover:bg-blue-100");
                });
                btn.classList.add("active", "bg-custom-blue", "text-white");
                btn.classList.remove("text-custom-blue", "hover:bg-blue-100");
                pages.forEach((page) => {
                    page.classList.add("hidden");
                    page.classList.remove("active", "animate-fade-in-up");
                });
                const targetPage = document.getElementById(targetPageId);
                if (targetPage) {
                    targetPage.classList.remove("hidden");
                    targetPage.classList.add("active", "animate-fade-in-up");
                    targetPage.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
        qsa('.nav-btn').forEach(button => {
            if (!button.classList.contains('active')) button.classList.add('text-custom-blue', 'hover:bg-blue-100', 'transition-colors');
            else button.classList.add('bg-custom-blue', 'text-white');
        });
        resumeBtn.addEventListener("click", () => {
            resumeModal.classList.remove("hidden");
            document.body.style.overflow = 'hidden';
        });
        window.closeResumeModal = () => {
            resumeModal.classList.add("hidden");
            document.body.style.overflow = 'auto';
        };
        resumeModal.addEventListener("click", (e) => { if (e.target === resumeModal) closeResumeModal(); });
        window.addEventListener('resize', () => {
            setupCanvas();
            initParticles();
        });
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.remove('opacity-0', 'translate-y-10');
                backToTopBtn.classList.add('opacity-100', 'translate-y-0');
            } else {
                backToTopBtn.classList.remove('opacity-100', 'translate-y-0');
                backToTopBtn.classList.add('opacity-0', 'translate-y-10');
            }
        });
        backToTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
        qs("#currentYear").textContent = new Date().getFullYear();
        document.addEventListener('DOMContentLoaded', () => {
            if (landing && !landing.classList.contains("hidden")) {
                 document.body.style.overflow = 'hidden';
                 setupCanvas();
                 initParticles();
                 animateParticles();
            } else {
                document.body.style.overflow = 'auto';
            }
            renderFilterButtons();
            renderProjects();
            const initialPage = window.location.hash ? window.location.hash.substring(1) : 'homeSection';
            const initialNavButton = qs(`#mainNav button[data-page="${initialPage}"]`);
            if (initialNavButton) {
                initialNavButton.click();
            } else {
                qs('#mainNav button[data-page="homeSection"]').click();
            }
        });
    </script>
</body>
</html>
